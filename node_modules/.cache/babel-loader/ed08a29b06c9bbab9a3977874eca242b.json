{"ast":null,"code":"var _jsxFileName = \"/Users/meghna/iCloud Drive (Archive)/Desktop/microsoft_engage_2021_project-1/src/components/Calendar.js\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport { BiChevronLeft, BiChevronRight } from \"react-icons/bi\";\nimport firebase from \"../firebase/firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Calendar extends React.Component {\n  constructor(_props) {\n    super(_props);\n    this.state = {\n      dateContext: moment(),\n      today: moment(),\n      showMonthPopup: false,\n      showYearPopup: false,\n      selectedDay: null\n    };\n    this.weekdays = moment.weekdays();\n    this.weekdaysShort = moment.weekdaysShort();\n    this.months = moment.months();\n\n    this.year = () => {\n      return this.state.dateContext.format(\"Y\");\n    };\n\n    this.month = () => {\n      return this.state.dateContext.format(\"MMMM\");\n    };\n\n    this.daysInMonth = () => {\n      return this.state.dateContext.daysInMonth();\n    };\n\n    this.currentDate = () => {\n      return this.state.dateContext.get(\"date\");\n    };\n\n    this.currentDay = () => {\n      return this.state.dateContext.format(\"D\");\n    };\n\n    this.firstDayOfMonth = () => {\n      let dateContext = this.state.dateContext;\n      let firstDay = moment(dateContext).startOf(\"month\").format(\"d\");\n      return firstDay;\n    };\n\n    this.setMonth = month => {\n      let monthNo = this.months.indexOf(month);\n      let dateContext = Object.assign({}, this.state.dateContext);\n      dateContext = moment(dateContext).set(\"month\", monthNo);\n      this.setState({\n        dateContext: dateContext\n      });\n    };\n\n    this.nextMonth = () => {\n      let dateContext = Object.assign({}, this.state.dateContext);\n      dateContext = moment(dateContext).add(1, \"month\");\n      this.setState({\n        dateContext: dateContext\n      });\n      this.props.onNextMonth && this.props.onNextMonth();\n    };\n\n    this.prevMonth = () => {\n      let dateContext = Object.assign({}, this.state.dateContext);\n      dateContext = moment(dateContext).subtract(1, \"month\");\n      this.setState({\n        dateContext: dateContext\n      });\n      this.props.onPrevMonth && this.props.onPrevMonth();\n    };\n\n    this.onSelectChange = (e, data) => {\n      this.setMonth(data);\n      this.props.onMonthChange && this.props.onMonthChange();\n    };\n\n    this.SelectList = props => {\n      let popup = props.data.map(data => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-bold mt-1 hover:bg-grey-200 transition all duration-200\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              this.onSelectChange(e, data);\n            },\n            children: data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 11\n          }, this)\n        }, data, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }, this);\n      });\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute mt-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute w-full h-full bg-grey-900 -bottom-1 -right-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative flex flex-col bg-white border-2 border-grey-900 p-2\",\n            children: popup\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.onChangeMonth = (e, month) => {\n      this.setState({\n        showMonthPopup: !this.state.showMonthPopup\n      });\n    };\n\n    this.MonthNav = () => {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"text-black text-xl font-bold focus:outline-none\",\n        onClick: e => {\n          this.onChangeMonth(e, this.month());\n        },\n        children: [this.month(), this.state.showMonthPopup && /*#__PURE__*/_jsxDEV(this.SelectList, {\n          data: this.months\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.showYearEditor = () => {\n      this.setState({\n        showYearNav: true\n      });\n    };\n\n    this.setYear = year => {\n      let dateContext = Object.assign({}, this.state.dateContext);\n      dateContext = moment(dateContext).set(\"year\", year);\n      this.setState({\n        dateContext: dateContext\n      });\n    };\n\n    this.onYearChange = e => {\n      this.setYear(e.target.value);\n      this.props.onYearChange && this.props.onYearChange(e, e.target.value);\n    };\n\n    this.onKeyUpYear = e => {\n      if (e.which === 13 || e.which === 27) {\n        this.setYear(e.target.value);\n        this.setState({\n          showYearNav: false\n        });\n      }\n    };\n\n    this.YearNav = () => {\n      return this.state.showYearNav ? /*#__PURE__*/_jsxDEV(\"input\", {\n        defaultValue: this.year(),\n        className: \"text-black font-bold bg-grey-200 p-1\",\n        ref: yearInput => {\n          this.yearInput = yearInput;\n        },\n        onKeyUp: e => this.onKeyUpYear(e),\n        onChange: e => this.onYearChange(e),\n        type: \"number\",\n        placeholder: \"year\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-black font-bold text-xl\",\n        onDoubleClick: e => {\n          this.showYearEditor();\n        },\n        children: this.year()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.onDayClick = (e, day) => {\n      this.setState({\n        selectedDay: day\n      }, () => {\n        const response = firebase.firestore().collection(\"users\").doc(this.currentUser.uid);\n        response.get().then(async snapshot => {\n          var events = [];\n          events = snapshot.data().events;\n          var data = snapshot.data().attendanceData;\n          var selected = this.year() + \"-\" + this.state.dateContext.format(\"MM\") + \"-\" + day;\n          const filtered = events.filter(event => event.date === selected);\n          this.updateData(data, filtered);\n        });\n      });\n      this.props.onDayClick && this.props.onDayClick(e, day);\n    };\n\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.currentUser = user;\n      } else {}\n    });\n    this.width = _props.width || \"350px\";\n    this.style = _props.style || {};\n    this.style.width = this.width;\n    this.currentUser = _props.currentUser;\n    this.dashboardState = _props.dashboardState;\n    this.updateData = _props.updateData;\n  }\n\n  render() {\n    var weekdays = this.weekdaysShort.map(day => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-bold\",\n          children: day\n        }, day, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this);\n    });\n    let blanks = [];\n\n    for (let i = 0; i < this.firstDayOfMonth(); i++) {\n      blanks.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-16 h-16\",\n        children: \"\"\n      }, i * 80, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this));\n    }\n\n    let daysInMonth = [];\n\n    for (let d = 1; d <= this.daysInMonth(); d++) {\n      var currentDayClass = d.toString() === this.currentDay().toString() ? \"bg-white border-2 border-black flex flex-row focus:outline-none text-black font-bold w-16 h-16 justify-center items-center transition-all\" : \"flex flex-row text-black font-bold w-16 h-16 focus:bg-grey-300 focus:outline-none justify-center items-center hover:bg-grey-900 hover:text-white transition all duration-300 ease-in-out\";\n      daysInMonth.push( /*#__PURE__*/_jsxDEV(\"button\", {\n        className: currentDayClass,\n        onClick: e => {\n          this.onDayClick(e, d);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: d\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)\n      }, d, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this));\n    }\n\n    var totalSlots = [...blanks, ...daysInMonth];\n    let rows = [];\n    let cells = [];\n    totalSlots.forEach((row, i) => {\n      if (i % 7 !== 0) {\n        cells.push(row);\n      } else {\n        let insertRow = cells.slice();\n        rows.push(insertRow);\n        cells = [];\n        cells.push(row);\n      }\n\n      if (i === totalSlots.length - 1) {\n        let insertRow = cells.slice();\n        rows.push(insertRow);\n      }\n    });\n    let trElems = rows.map((d, i) => {\n      if (d.length === 7) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row text-black w-full\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-row w-full\",\n            children: d\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)\n        }, i * 100, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row text-black w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row w-full justify-end\",\n          children: d\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)\n      }, i * 100, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-96 p-4 bg-gray-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex flex-row justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              this.prevMonth();\n            },\n            className: \"text-black text-2xl flex flex-row justify-center items-center font-bold focus:outline-none w-12 h-12 hover:bg-grey-900 hover:bg-grey-900 hover:text-white transition all duration-300 ease-in-out\",\n            children: /*#__PURE__*/_jsxDEV(BiChevronLeft, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-black font-bold\",\n            children: [/*#__PURE__*/_jsxDEV(this.MonthNav, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(this.YearNav, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              this.nextMonth();\n            },\n            className: \"text-black text-2xl flex flex-row justify-center items-center font-bold focus:outline-none w-12 h-12 hover:bg-grey-900 hover:bg-grey-900 hover:text-white transition all duration-300 ease-in-out\",\n            children: /*#__PURE__*/_jsxDEV(BiChevronRight, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row justify-between w-full mt-4 px-2\",\n          children: weekdays\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: trElems\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/meghna/iCloud Drive (Archive)/Desktop/microsoft_engage_2021_project-1/src/components/Calendar.js"],"names":["moment","React","BiChevronLeft","BiChevronRight","firebase","Calendar","Component","constructor","props","state","dateContext","today","showMonthPopup","showYearPopup","selectedDay","weekdays","weekdaysShort","months","year","format","month","daysInMonth","currentDate","get","currentDay","firstDayOfMonth","firstDay","startOf","setMonth","monthNo","indexOf","Object","assign","set","setState","nextMonth","add","onNextMonth","prevMonth","subtract","onPrevMonth","onSelectChange","e","data","onMonthChange","SelectList","popup","map","onChangeMonth","MonthNav","showYearEditor","showYearNav","setYear","onYearChange","target","value","onKeyUpYear","which","YearNav","yearInput","onDayClick","day","response","firestore","collection","doc","currentUser","uid","then","snapshot","events","attendanceData","selected","filtered","filter","event","date","updateData","auth","onAuthStateChanged","user","width","style","dashboardState","render","blanks","i","push","d","currentDayClass","toString","totalSlots","rows","cells","forEach","row","insertRow","slice","length","trElems"],"mappings":"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","sourcesContent":["import moment from \"moment\";\nimport React from \"react\";\nimport { BiChevronLeft, BiChevronRight } from \"react-icons/bi\";\n\nimport firebase from \"../firebase/firebase\";\n\nexport default class Calendar extends React.Component {\n  state = {\n    dateContext: moment(),\n    today: moment(),\n    showMonthPopup: false,\n    showYearPopup: false,\n    selectedDay: null,\n  };\n\n  constructor(props) {\n    super(props);\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        this.currentUser = user;\n      } else {\n      }\n    });\n    this.width = props.width || \"350px\";\n    this.style = props.style || {};\n    this.style.width = this.width;\n    this.currentUser = props.currentUser;\n    this.dashboardState = props.dashboardState;\n    this.updateData = props.updateData;\n  }\n\n  weekdays = moment.weekdays();\n  weekdaysShort = moment.weekdaysShort();\n  months = moment.months();\n\n  year = () => {\n    return this.state.dateContext.format(\"Y\");\n  };\n  month = () => {\n    return this.state.dateContext.format(\"MMMM\");\n  };\n  daysInMonth = () => {\n    return this.state.dateContext.daysInMonth();\n  };\n  currentDate = () => {\n    return this.state.dateContext.get(\"date\");\n  };\n  currentDay = () => {\n    return this.state.dateContext.format(\"D\");\n  };\n\n  firstDayOfMonth = () => {\n    let dateContext = this.state.dateContext;\n    let firstDay = moment(dateContext).startOf(\"month\").format(\"d\");\n    return firstDay;\n  };\n\n  setMonth = (month) => {\n    let monthNo = this.months.indexOf(month);\n    let dateContext = Object.assign({}, this.state.dateContext);\n    dateContext = moment(dateContext).set(\"month\", monthNo);\n    this.setState({\n      dateContext: dateContext,\n    });\n  };\n\n  nextMonth = () => {\n    let dateContext = Object.assign({}, this.state.dateContext);\n    dateContext = moment(dateContext).add(1, \"month\");\n    this.setState({\n      dateContext: dateContext,\n    });\n    this.props.onNextMonth && this.props.onNextMonth();\n  };\n\n  prevMonth = () => {\n    let dateContext = Object.assign({}, this.state.dateContext);\n    dateContext = moment(dateContext).subtract(1, \"month\");\n    this.setState({\n      dateContext: dateContext,\n    });\n    this.props.onPrevMonth && this.props.onPrevMonth();\n  };\n\n  onSelectChange = (e, data) => {\n    this.setMonth(data);\n    this.props.onMonthChange && this.props.onMonthChange();\n  };\n  SelectList = (props) => {\n    let popup = props.data.map((data) => {\n      return (\n        <div\n          key={data}\n          className=\"text-sm font-bold mt-1 hover:bg-grey-200 transition all duration-200\"\n        >\n          <button\n            onClick={(e) => {\n              this.onSelectChange(e, data);\n            }}\n          >\n            {data}\n          </button>\n        </div>\n      );\n    });\n\n    return (\n      <div className=\"absolute mt-2\">\n        <div className=\"relative\">\n          <div className=\"absolute w-full h-full bg-grey-900 -bottom-1 -right-1\"></div>\n          <div className=\"relative flex flex-col bg-white border-2 border-grey-900 p-2\">\n            {popup}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  onChangeMonth = (e, month) => {\n    this.setState({\n      showMonthPopup: !this.state.showMonthPopup,\n    });\n  };\n\n  MonthNav = () => {\n    return (\n      <button\n        className=\"text-black text-xl font-bold focus:outline-none\"\n        onClick={(e) => {\n          this.onChangeMonth(e, this.month());\n        }}\n      >\n        {this.month()}\n        {this.state.showMonthPopup && <this.SelectList data={this.months} />}\n      </button>\n    );\n  };\n\n  showYearEditor = () => {\n    this.setState({\n      showYearNav: true,\n    });\n  };\n\n  setYear = (year) => {\n    let dateContext = Object.assign({}, this.state.dateContext);\n    dateContext = moment(dateContext).set(\"year\", year);\n    this.setState({\n      dateContext: dateContext,\n    });\n  };\n  onYearChange = (e) => {\n    this.setYear(e.target.value);\n    this.props.onYearChange && this.props.onYearChange(e, e.target.value);\n  };\n\n  onKeyUpYear = (e) => {\n    if (e.which === 13 || e.which === 27) {\n      this.setYear(e.target.value);\n      this.setState({\n        showYearNav: false,\n      });\n    }\n  };\n\n  YearNav = () => {\n    return this.state.showYearNav ? (\n      <input\n        defaultValue={this.year()}\n        className=\"text-black font-bold bg-grey-200 p-1\"\n        ref={(yearInput) => {\n          this.yearInput = yearInput;\n        }}\n        onKeyUp={(e) => this.onKeyUpYear(e)}\n        onChange={(e) => this.onYearChange(e)}\n        type=\"number\"\n        placeholder=\"year\"\n      />\n    ) : (\n      <span\n        className=\"text-black font-bold text-xl\"\n        onDoubleClick={(e) => {\n          this.showYearEditor();\n        }}\n      >\n        {this.year()}\n      </span>\n    );\n  };\n\n  onDayClick = (e, day) => {\n    this.setState(\n      {\n        selectedDay: day,\n      },\n      () => {\n        const response = firebase\n          .firestore()\n          .collection(\"users\")\n          .doc(this.currentUser.uid);\n        response.get().then(async (snapshot) => {\n          var events = [];\n          events = snapshot.data().events;\n          var data = snapshot.data().attendanceData;\n          var selected =\n            this.year() + \"-\" + this.state.dateContext.format(\"MM\") + \"-\" + day;\n          const filtered = events.filter((event) => event.date === selected);\n          this.updateData(data, filtered);\n        });\n      }\n    );\n\n    this.props.onDayClick && this.props.onDayClick(e, day);\n  };\n\n  render() {\n    var weekdays = this.weekdaysShort.map((day) => {\n      return (\n        <div className=\"flex flex-row\">\n          <div key={day} className=\"font-bold\">\n            {day}\n          </div>\n        </div>\n      );\n    });\n\n    let blanks = [];\n    for (let i = 0; i < this.firstDayOfMonth(); i++) {\n      blanks.push(\n        <div key={i * 80} className=\"w-16 h-16\">\n          {\"\"}\n        </div>\n      );\n    }\n\n    let daysInMonth = [];\n    for (let d = 1; d <= this.daysInMonth(); d++) {\n      var currentDayClass =\n        d.toString() === this.currentDay().toString()\n          ? \"bg-white border-2 border-black flex flex-row focus:outline-none text-black font-bold w-16 h-16 justify-center items-center transition-all\"\n          : \"flex flex-row text-black font-bold w-16 h-16 focus:bg-grey-300 focus:outline-none justify-center items-center hover:bg-grey-900 hover:text-white transition all duration-300 ease-in-out\";\n      daysInMonth.push(\n        <button\n          key={d}\n          className={currentDayClass}\n          onClick={(e) => {\n            this.onDayClick(e, d);\n          }}\n        >\n          <span>{d}</span>\n        </button>\n      );\n    }\n\n    var totalSlots = [...blanks, ...daysInMonth];\n    let rows = [];\n    let cells = [];\n\n    totalSlots.forEach((row, i) => {\n      if (i % 7 !== 0) {\n        cells.push(row);\n      } else {\n        let insertRow = cells.slice();\n        rows.push(insertRow);\n        cells = [];\n        cells.push(row);\n      }\n      if (i === totalSlots.length - 1) {\n        let insertRow = cells.slice();\n        rows.push(insertRow);\n      }\n    });\n    let trElems = rows.map((d, i) => {\n      if (d.length === 7) {\n        return (\n          <div className=\"flex flex-row text-black w-full\" key={i * 100}>\n            <div className=\"flex flex-row w-full\">{d}</div>\n          </div>\n        );\n      }\n      return (\n        <div className=\"flex flex-row text-black w-full\" key={i * 100}>\n          <div className=\"flex flex-row w-full justify-end\">{d}</div>\n        </div>\n      );\n    });\n\n    return (\n      <div className=\"min-h-96 p-4 bg-gray-200\">\n        <div className=\"flex flex-col\">\n          <div className=\"w-full flex flex-row justify-between items-center\">\n            <button\n              onClick={(e) => {\n                this.prevMonth();\n              }}\n              className=\"text-black text-2xl flex flex-row justify-center items-center font-bold focus:outline-none w-12 h-12 hover:bg-grey-900 hover:bg-grey-900 hover:text-white transition all duration-300 ease-in-out\"\n            >\n              <BiChevronLeft />\n            </button>\n            <div className=\"text-black font-bold\">\n              <this.MonthNav /> <this.YearNav />\n            </div>\n            <button\n              onClick={(e) => {\n                this.nextMonth();\n              }}\n              className=\"text-black text-2xl flex flex-row justify-center items-center font-bold focus:outline-none w-12 h-12 hover:bg-grey-900 hover:bg-grey-900 hover:text-white transition all duration-300 ease-in-out\"\n            >\n              <BiChevronRight />\n            </button>\n          </div>\n          <div className=\"flex flex-row justify-between w-full mt-4 px-2\">\n            {weekdays}\n          </div>\n          <div className=\"mt-8\">{trElems}</div>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}