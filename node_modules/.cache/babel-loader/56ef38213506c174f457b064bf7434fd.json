{"ast":null,"code":"var _jsxFileName = \"/Users/meghna/iCloud Drive (Archive)/Desktop/microsoft_engage_2021_project-1/src/components/Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { BiCalendarPlus } from \"react-icons/bi\";\nimport Modal from \"react-modal\";\nimport { useHistory } from \"react-router-dom\";\nimport Calendar from \"../components/Calendar\";\nimport DashboardHeader from \"../components/DashboardHeader\";\nimport { useAuthContext } from \"../context/AuthContext\";\nimport { useDashboardContext } from \"../context/DashboardContext\";\nimport firebase from \"../firebase/firebase\";\nimport \"../public/css/dashboard.css\";\nimport DashboardHome from \"./DashboardHome\";\nimport ScheduledEvent from \"./ScheduledEvent\";\nimport DashboardClassroom from \"./DashboardClassroom\";\nimport { useClassroomContext } from \"../context/ClassroomContext\";\nimport { GrClose } from \"react-icons/gr\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst modalStyle = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    position: \"absolute\",\n    border: \"none\",\n    background: \"transparent\",\n    borderRadius: \"0px\"\n  }\n};\n\nfunction Dashboard() {\n  _s();\n\n  const [modalIsOpen, toggleModal] = useState(false);\n  const [snackbar, toggleSnackbar] = useState(true);\n  const [eventData, setEventData] = useState(null);\n  const [tabIndex, setTabIndex] = useState(0);\n  const {\n    dashboardState,\n    updateData\n  } = useDashboardContext();\n  const {\n    classroomState,\n    setTeacherExplicit\n  } = useClassroomContext();\n  const {\n    currentUser,\n    setCurrentUser\n  } = useAuthContext();\n  const history = useHistory();\n  var snackbarStyle;\n\n  if (classroomState.isTeacher === false && snackbar === true) {\n    snackbarStyle = \"flex flex-row bg-grey-900 justify-between\";\n  } else {\n    snackbarStyle = \"flex flex-row bg-grey-900 justify-between hidden\";\n  }\n\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        setCurrentUser(user);\n        const response = firebase.firestore().collection(\"users\").doc(user.uid);\n        response.get().then(snapshot => {\n          var temp = {};\n          if (snapshot.data()) temp = snapshot.data().attendanceData;\n          var tempEvents = [];\n          if (snapshot.data()) tempEvents = getTodayEvents(snapshot.data());\n          updateData(temp, tempEvents);\n          setTeacherExplicit(snapshot.data().isTeacher);\n        });\n      } else {\n        history.replace(\"/\");\n      }\n    });\n  }, []);\n\n  function logout() {\n    firebase.auth().signOut().then(() => {\n      history.replace(\"/\");\n    });\n  }\n\n  function getToday() {\n    var today = new Date();\n    var dd = String(today.getDate()).padStart(2, \"0\");\n    var mm = String(today.getMonth() + 1).padStart(2, \"0\");\n    var yyyy = today.getFullYear();\n    today = yyyy + \"-\" + mm + \"-\" + dd;\n    return today;\n  }\n\n  function getTodayEvents(snapshotData) {\n    var today = getToday();\n    const events = snapshotData.events.filter(event => event.date === today);\n    return events;\n  }\n\n  function openModal() {\n    setEventData(null);\n    toggleModal(true);\n  }\n\n  function closeModal() {\n    toggleModal(false);\n  }\n\n  function closeSnackbar() {\n    toggleSnackbar(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"no-scrollbar w-screen min-h-screen flex 2xl:flex-row flex-col justify-between\",\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: modalIsOpen,\n      onRequestClose: closeModal,\n      style: modalStyle,\n      ariaHideApp: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow bg-white flex flex-col 2xl:mb-8 px-16 h-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: snackbarStyle,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: closeSnackbar,\n          className: \"font-bold bg-white text-grey-900 focus:outline-none my-2 mr-2 p-1 rounded-md\",\n          children: /*#__PURE__*/_jsxDEV(GrClose, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DashboardHeader, {\n        logout: logout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row space-x-7 justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => setTabIndex(0),\n          className: \"font-bold text-md border-2 border-grey-900 px-4 py-1 transition all duration-200 ease-in-out hover:bg-grey-900 hover:text-white\",\n          children: \"Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => setTabIndex(1),\n          className: \"font-bold text-md border-2 border-grey-900 px-4 py-1 transition all duration-200 ease-in-out hover:bg-grey-900 hover:text-white\",\n          children: \"Classroom\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => setTabIndex(2),\n          className: \"font-bold text-md border-2 border-grey-900 px-4 py-1 transition all duration-200 ease-in-out hover:bg-grey-900 hover:text-white\",\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), tabIndex === 0 ? /*#__PURE__*/_jsxDEV(DashboardHome, {\n        currentUser: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this) : tabIndex === 1 ? /*#__PURE__*/_jsxDEV(DashboardClassroom, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(DashboardClassroom, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col md:items-center 2xl:mt-0 md:px-2 mt-8 md:flex-grow-1 bg-grey-200\",\n      children: [/*#__PURE__*/_jsxDEV(Calendar, {\n        updateData: updateData,\n        dashboardState: dashboardState,\n        currentUser: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row md:px-4 mt-10 w-full justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-bold text-lg\",\n          children: \"Scheduled Events\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"outline-none border-none focus:outline-none focus:border-none\",\n          onClick: openModal,\n          children: /*#__PURE__*/_jsxDEV(BiCalendarPlus, {\n            className: \"text-2xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full px-4 mt-2\",\n        children: dashboardState.events.map((event, index) => {\n          var bgColor = \"white\";\n          if (event.color !== null || event.color !== \"\") bgColor = event.color;\n          return /*#__PURE__*/_jsxDEV(ScheduledEvent, {\n            event: event,\n            popupColor: bgColor,\n            toggleModal: toggleModal,\n            setEventData: setEventData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Dashboard, \"ZZjiC8542dLSFMF/Y3TOxD3dQuI=\", false, function () {\n  return [useDashboardContext, useClassroomContext, useAuthContext, useHistory];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/Users/meghna/iCloud Drive (Archive)/Desktop/microsoft_engage_2021_project-1/src/components/Dashboard.js"],"names":["React","useEffect","useState","BiCalendarPlus","Modal","useHistory","Calendar","DashboardHeader","useAuthContext","useDashboardContext","firebase","DashboardHome","ScheduledEvent","DashboardClassroom","useClassroomContext","GrClose","modalStyle","content","top","left","right","bottom","marginRight","transform","position","border","background","borderRadius","Dashboard","modalIsOpen","toggleModal","snackbar","toggleSnackbar","eventData","setEventData","tabIndex","setTabIndex","dashboardState","updateData","classroomState","setTeacherExplicit","currentUser","setCurrentUser","history","snackbarStyle","isTeacher","auth","onAuthStateChanged","user","response","firestore","collection","doc","uid","get","then","snapshot","temp","data","attendanceData","tempEvents","getTodayEvents","replace","logout","signOut","getToday","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","snapshotData","events","filter","event","date","openModal","closeModal","closeSnackbar","e","map","index","bgColor","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { BiCalendarPlus } from \"react-icons/bi\";\nimport Modal from \"react-modal\";\nimport { useHistory } from \"react-router-dom\";\nimport Calendar from \"../components/Calendar\";\nimport DashboardHeader from \"../components/DashboardHeader\";\nimport { useAuthContext } from \"../context/AuthContext\";\nimport { useDashboardContext } from \"../context/DashboardContext\";\nimport firebase from \"../firebase/firebase\";\nimport \"../public/css/dashboard.css\";\nimport DashboardHome from \"./DashboardHome\";\nimport ScheduledEvent from \"./ScheduledEvent\";\nimport DashboardClassroom from \"./DashboardClassroom\";\nimport { useClassroomContext } from \"../context/ClassroomContext\";\nimport { GrClose } from \"react-icons/gr\";\n\nconst modalStyle = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    position: \"absolute\",\n    border: \"none\",\n    background: \"transparent\",\n    borderRadius: \"0px\",\n  },\n};\n\nfunction Dashboard() {\n  const [modalIsOpen, toggleModal] = useState(false);\n  const [snackbar, toggleSnackbar] = useState(true);\n  const [eventData, setEventData] = useState(null);\n  const [tabIndex, setTabIndex] = useState(0);\n\n  const { dashboardState, updateData } = useDashboardContext();\n  const { classroomState, setTeacherExplicit } = useClassroomContext();\n\n  const { currentUser, setCurrentUser } = useAuthContext();\n\n  const history = useHistory();\n\n  var snackbarStyle;\n  if (classroomState.isTeacher === false && snackbar === true) {\n    snackbarStyle = \"flex flex-row bg-grey-900 justify-between\";\n  } else {\n    snackbarStyle = \"flex flex-row bg-grey-900 justify-between hidden\";\n  }\n\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        setCurrentUser(user); \n        const response = firebase.firestore().collection(\"users\").doc(user.uid);\n        response.get().then((snapshot) => {\n          var temp = {};\n          if (snapshot.data()) temp = snapshot.data().attendanceData;\n          var tempEvents = [];\n          if (snapshot.data()) tempEvents = getTodayEvents(snapshot.data());\n          updateData(temp, tempEvents);\n          setTeacherExplicit(snapshot.data().isTeacher);\n        });\n      } else {\n        history.replace(\"/\");\n      }\n    });\n  }, []);\n\n  function logout() {\n    firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        history.replace(\"/\");\n      });\n  }\n\n  function getToday() {\n    var today = new Date();\n    var dd = String(today.getDate()).padStart(2, \"0\");\n    var mm = String(today.getMonth() + 1).padStart(2, \"0\");\n    var yyyy = today.getFullYear();\n\n    today = yyyy + \"-\" + mm + \"-\" + dd;\n    return today;\n  }\n\n  function getTodayEvents(snapshotData) {\n    var today = getToday();\n    const events = snapshotData.events.filter((event) => event.date === today);\n    return events;\n  }\n\n  function openModal() {\n    setEventData(null);\n    toggleModal(true);\n  }\n\n  function closeModal() {\n    toggleModal(false);\n  }\n\n  function closeSnackbar() {\n    toggleSnackbar(false);\n  }\n\n  return (\n    <div className=\"no-scrollbar w-screen min-h-screen flex 2xl:flex-row flex-col justify-between\">\n      <Modal\n        isOpen={modalIsOpen}\n        onRequestClose={closeModal}\n        style={modalStyle}\n        ariaHideApp={false}\n      >\n       \n      </Modal>\n      <div className=\"flex-grow bg-white flex flex-col 2xl:mb-8 px-16 h-full\">\n        <div className={snackbarStyle}>\n          \n          <button\n            onClick={closeSnackbar}\n            className=\"font-bold bg-white text-grey-900 focus:outline-none my-2 mr-2 p-1 rounded-md\"\n          >\n            <GrClose />\n          </button>\n        </div>\n        <DashboardHeader logout={logout} />\n        <div className=\"flex flex-row space-x-7 justify-center\">\n          <button\n            onClick={(e) => setTabIndex(0)}\n            className=\"font-bold text-md border-2 border-grey-900 px-4 py-1 transition all duration-200 ease-in-out hover:bg-grey-900 hover:text-white\"\n          >\n            Home\n          </button>\n          <button\n            onClick={(e) => setTabIndex(1)}\n            className=\"font-bold text-md border-2 border-grey-900 px-4 py-1 transition all duration-200 ease-in-out hover:bg-grey-900 hover:text-white\"\n          >\n            Classroom\n          </button>\n          <button\n            onClick={(e) => setTabIndex(2)}\n            className=\"font-bold text-md border-2 border-grey-900 px-4 py-1 transition all duration-200 ease-in-out hover:bg-grey-900 hover:text-white\"\n          >\n            Profile\n          </button>\n        </div>\n        {tabIndex === 0 ? (\n          <DashboardHome currentUser={currentUser} />\n        ) : tabIndex === 1 ? (\n          <DashboardClassroom />\n        ) : (\n              <DashboardClassroom />\n        )}\n      </div>\n      <div className=\"flex flex-col md:items-center 2xl:mt-0 md:px-2 mt-8 md:flex-grow-1 bg-grey-200\">\n        <Calendar\n          updateData={updateData}\n          dashboardState={dashboardState}\n          currentUser={currentUser}\n        />\n        <div className=\"flex flex-row md:px-4 mt-10 w-full justify-between\">\n          <div className=\"font-bold text-lg\">Scheduled Events</div>\n          <button\n            className=\"outline-none border-none focus:outline-none focus:border-none\"\n            onClick={openModal}\n          >\n            <BiCalendarPlus className=\"text-2xl\" />\n          </button>\n        </div>\n        <div className=\"w-full px-4 mt-2\">\n          {dashboardState.events.map((event, index) => {\n            var bgColor = \"white\";\n            if (event.color !== null || event.color !== \"\")\n              bgColor = event.color;\n            return (\n              <ScheduledEvent\n                event={event}\n                popupColor={bgColor}\n                toggleModal={toggleModal}\n                setEventData={setEventData}\n              />\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}