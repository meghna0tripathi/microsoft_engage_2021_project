{"ast":null,"code":"var _jsxFileName = \"/Users/meghna/iCloud Drive (Archive)/Desktop/microsoft_engage_2021_project-1/src/components/AssignmentTile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { RiArrowDropDownFill } from \"react-icons/ri\";\nimport { useAuthContext } from \"../context/AuthContext\";\nimport { useClassroomContext } from \"../context/ClassroomContext\";\nimport firebase from \"../firebase/firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AssignmentTile = _ref => {\n  _s();\n\n  let {\n    assignment,\n    index,\n    assignmentList\n  } = _ref;\n  const [answer, setAnswer] = useState(\"\");\n  const [displayAnswers, toggleDisplayAnswers] = useState(false);\n  const {\n    currentUser\n  } = useAuthContext();\n  const {\n    classroomState,\n    updateAssignmentList\n  } = useClassroomContext();\n  var submissionListStyle = displayAnswers === false ? \"bg-grey-200 transition-all duration-200 origin-top transform scale-y-0 max-h-0\" : \"bg-grey-200 transition-all duration-200 origin-top transform scale-y-1\";\n\n  function getToday() {\n    var today = new Date();\n    var dd = String(today.getDate()).padStart(2, \"0\");\n    var mm = String(today.getMonth() + 1).padStart(2, \"0\");\n    var yyyy = today.getFullYear();\n    today = yyyy + \"-\" + mm + \"-\" + dd;\n    return today;\n  }\n\n  function addAnswer() {\n    if (answer.trim() !== \"\") {\n      var newAnswer = {\n        text: answer,\n        answeredBy: currentUser.displayName,\n        submissionDate: getToday()\n      };\n      const response = firebase.firestore().collection(\"users\").doc(currentUser.uid);\n      response.get().then(snapshot => {\n        var submissions = [];\n        var allAssignments = assignmentList;\n        submissions = assignment.answers;\n        submissions.push(newAnswer);\n        var updatedAssignment = {\n          text: assignment.text,\n          link: assignment.link,\n          author: assignment.author,\n          due: assignment.due,\n          answers: submissions\n        };\n        allAssignments = allAssignments.map(a => {\n          if (a.text === assignment.text) {\n            return updatedAssignment;\n          }\n\n          return a;\n        });\n        updateAssignmentList(allAssignments);\n        response.update({\n          assignments: allAssignments\n        });\n        const res = firebase.firestore().collection(\"users\").where(\"displayName\", \"==\", assignment.author);\n        res.get().then(snapshot => {\n          snapshot.docs.forEach(doc => {\n            doc.ref.update({\n              assignments: allAssignments\n            });\n          });\n        });\n        setAnswer(\"\");\n      });\n    } else {\n      window.alert(\"You have to write something in the answer field\");\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col overflow-auto border border-grey-900 md:mr-8 mr-0 mt-2 p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex md:flex-row flex-col justify-between md:items-center items-start\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-bold text-lg\",\n        children: assignment.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-bold text-xs\",\n        children: [\"Due date: \", assignment.due]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-xs\",\n      children: [\"by: \", assignment.author]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      value: answer,\n      onChange: e => setAnswer(e.target.value),\n      className: \"mt-4 text-sm focus:outline-none\",\n      placeholder: \"Type your answer here...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-row justify-end mt-2\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addAnswer,\n        className: \"bg-grey-900 px-4 py-2 text-white font-bold\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), classroomState.isTeacher ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col mt-4 overflow-y-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => toggleDisplayAnswers(!displayAnswers),\n        className: \"flex flex-row justify-between items-center focus:outline-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: \"Submissions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => toggleDisplayAnswers(!displayAnswers),\n          className: \"text-xl\",\n          children: /*#__PURE__*/_jsxDEV(RiArrowDropDownFill, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: submissionListStyle,\n        children: assignment.answers.map(answer => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col my-2 mx-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-row justify-between items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"\",\n                children: answer.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs font-semibold\",\n                children: answer.submissionDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs font-semibold\",\n              children: answer.answeredBy\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AssignmentTile, \"wwuOu+eI3t6KF/Szo/qwf/JD7vI=\", false, function () {\n  return [useAuthContext, useClassroomContext];\n});\n\n_c = AssignmentTile;\nexport default AssignmentTile;\n\nvar _c;\n\n$RefreshReg$(_c, \"AssignmentTile\");","map":{"version":3,"sources":["/Users/meghna/iCloud Drive (Archive)/Desktop/microsoft_engage_2021_project-1/src/components/AssignmentTile.js"],"names":["React","useState","RiArrowDropDownFill","useAuthContext","useClassroomContext","firebase","AssignmentTile","assignment","index","assignmentList","answer","setAnswer","displayAnswers","toggleDisplayAnswers","currentUser","classroomState","updateAssignmentList","submissionListStyle","getToday","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","addAnswer","trim","newAnswer","text","answeredBy","displayName","submissionDate","response","firestore","collection","doc","uid","get","then","snapshot","submissions","allAssignments","answers","push","updatedAssignment","link","author","due","map","a","update","assignments","res","where","docs","forEach","ref","window","alert","e","target","value","isTeacher"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { RiArrowDropDownFill } from \"react-icons/ri\";\nimport { useAuthContext } from \"../context/AuthContext\";\nimport { useClassroomContext } from \"../context/ClassroomContext\";\nimport firebase from \"../firebase/firebase\";\n\nconst AssignmentTile = ({ assignment, index, assignmentList }) => {\n  const [answer, setAnswer] = useState(\"\");\n  const [displayAnswers, toggleDisplayAnswers] = useState(false);\n  const { currentUser } = useAuthContext();\n  const { classroomState, updateAssignmentList } = useClassroomContext();\n\n  var submissionListStyle =\n    displayAnswers === false\n      ? \"bg-grey-200 transition-all duration-200 origin-top transform scale-y-0 max-h-0\"\n      : \"bg-grey-200 transition-all duration-200 origin-top transform scale-y-1\";\n\n  function getToday() {\n    var today = new Date();\n    var dd = String(today.getDate()).padStart(2, \"0\");\n    var mm = String(today.getMonth() + 1).padStart(2, \"0\");\n    var yyyy = today.getFullYear();\n\n    today = yyyy + \"-\" + mm + \"-\" + dd;\n    return today;\n  }\n\n  function addAnswer() {\n    if (answer.trim() !== \"\") {\n      var newAnswer = {\n        text: answer,\n        answeredBy: currentUser.displayName,\n        submissionDate: getToday(),\n      };\n      const response = firebase\n        .firestore()\n        .collection(\"users\")\n        .doc(currentUser.uid);\n      response.get().then((snapshot) => {\n        var submissions = [];\n        var allAssignments = assignmentList;\n        submissions = assignment.answers;\n        submissions.push(newAnswer);\n        var updatedAssignment = {\n          text: assignment.text,\n          link: assignment.link,\n          author: assignment.author,\n          due: assignment.due,\n          answers: submissions,\n        };\n\n        allAssignments = allAssignments.map((a) => {\n          if (a.text === assignment.text) {\n            return updatedAssignment;\n          }\n          return a;\n        });\n\n        updateAssignmentList(allAssignments);\n\n        response.update({\n          assignments: allAssignments,\n        });\n\n        const res = firebase\n          .firestore()\n          .collection(\"users\")\n          .where(\"displayName\", \"==\", assignment.author);\n        res.get().then((snapshot) => {\n          snapshot.docs.forEach((doc) => {\n            doc.ref.update({\n              assignments: allAssignments,\n            });\n          });\n        });\n\n        setAnswer(\"\");\n      });\n    } else {\n      window.alert(\"You have to write something in the answer field\");\n    }\n  }\n\n  return (\n    <div className=\"flex flex-col overflow-auto border border-grey-900 md:mr-8 mr-0 mt-2 p-4\">\n      <div className=\"flex md:flex-row flex-col justify-between md:items-center items-start\">\n        <div className=\"font-bold text-lg\">{assignment.text}</div>\n        <div className=\"font-bold text-xs\">Due date: {assignment.due}</div>\n      </div>\n      <div className=\"text-xs\">by: {assignment.author}</div>\n\n      <textarea\n        value={answer}\n        onChange={(e) => setAnswer(e.target.value)}\n        className=\"mt-4 text-sm focus:outline-none\"\n        placeholder=\"Type your answer here...\"\n      ></textarea>\n      <div className=\"flex flex-row justify-end mt-2\">\n        <button\n          onClick={addAnswer}\n          className=\"bg-grey-900 px-4 py-2 text-white font-bold\"\n        >\n          Submit\n        </button>\n      </div>\n\n      {classroomState.isTeacher ? (\n        <div className=\"flex flex-col mt-4 overflow-y-hidden\">\n          <button\n            onClick={(e) => toggleDisplayAnswers(!displayAnswers)}\n            className=\"flex flex-row justify-between items-center focus:outline-none\"\n          >\n            <div className=\"\">Submissions</div>\n            <button\n              onClick={(e) => toggleDisplayAnswers(!displayAnswers)}\n              className=\"text-xl\"\n            >\n              <RiArrowDropDownFill />\n            </button>\n          </button>\n          <div className={submissionListStyle}>\n            {assignment.answers.map((answer) => {\n              return (\n                <div className=\"flex flex-col my-2 mx-2\">\n                  <div className=\"flex flex-row justify-between items-center\">\n                    <div className=\"\">{answer.text}</div>\n                    <div className=\"text-xs font-semibold\">\n                      {answer.submissionDate}\n                    </div>\n                  </div>\n                  <div className=\"text-xs font-semibold\">\n                    {answer.answeredBy}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      ) : (\n        <div></div>\n      )}\n    </div>\n  );\n};\n\nexport default AssignmentTile;\n"]},"metadata":{},"sourceType":"module"}